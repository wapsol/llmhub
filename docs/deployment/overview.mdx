---
title: 'Deployment Overview'
description: 'Deploy LLMHub to production environments'
---

## Deployment Options

LLMHub supports multiple deployment strategies depending on your infrastructure and requirements.

<CardGroup cols={3}>
  <Card title="Docker Compose" icon="docker" iconType="duotone">
    Simplest deployment for single-server setups
  </Card>
  <Card title="Kubernetes" icon="cubes" iconType="duotone">
    Scalable cloud-native deployments (coming soon)
  </Card>
  <Card title="Cloud Platforms" icon="cloud" iconType="duotone">
    AWS, GCP, Azure with managed services
  </Card>
</CardGroup>

## Quick Deployment Guide

### 1. System Requirements

<Tabs>
  <Tab title="Minimum">
    - **CPU**: 2 cores
    - **RAM**: 4 GB
    - **Storage**: 20 GB SSD
    - **OS**: Linux (Ubuntu 22.04 recommended)
    - **Docker**: 20.10+
    - **Docker Compose**: 2.0+
  </Tab>

  <Tab title="Recommended">
    - **CPU**: 4 cores
    - **RAM**: 8 GB
    - **Storage**: 50 GB SSD
    - **OS**: Linux (Ubuntu 22.04 LTS)
    - **Docker**: Latest stable
    - **Docker Compose**: Latest stable
  </Tab>

  <Tab title="High-Traffic">
    - **CPU**: 8+ cores
    - **RAM**: 16+ GB
    - **Storage**: 100+ GB SSD with backups
    - **OS**: Linux (Ubuntu 22.04 LTS)
    - **Load Balancer**: Nginx/HAProxy
    - **Database**: TimescaleDB cluster with replicas
  </Tab>
</Tabs>

### 2. Pre-Deployment Checklist

<Steps>
  <Step title="Server Setup">
    ```bash
    # Update system
    sudo apt update && sudo apt upgrade -y

    # Install Docker
    curl -fsSL https://get.docker.com -o get-docker.sh
    sudo sh get-docker.sh

    # Install Docker Compose
    sudo apt install docker-compose-plugin

    # Add user to docker group
    sudo usermod -aG docker $USER
    newgrp docker
    ```
  </Step>

  <Step title="Clone Repository">
    ```bash
    git clone https://github.com/yourusername/llmhub.git
    cd llmhub
    ```
  </Step>

  <Step title="Configure Environment">
    ```bash
    cp .env.example .env
    nano .env
    ```

    Update the following variables:
    ```bash
    # Database (use strong passwords!)
    DATABASE_URL=postgresql://llm_user:CHANGE_ME@llmhub-db:5432/llm_hub

    # LLM Provider API Keys
    ANTHROPIC_API_KEY=sk-ant-...
    OPENAI_API_KEY=sk-...
    GROQ_API_KEY=gsk_...

    # Security
    CORS_ORIGINS=["https://your-domain.com"]

    # Optional: Monitoring
    SENTRY_DSN=https://...
    ```
  </Step>

  <Step title="Build and Deploy">
    ```bash
    # Build images
    docker-compose build

    # Start services
    docker-compose up -d

    # Check status
    docker-compose ps
    docker-compose logs -f
    ```
  </Step>

  <Step title="Verify Deployment">
    ```bash
    # Health check
    curl http://localhost:4000/health

    # Access web console
    open http://localhost:4000

    # Check database
    docker-compose exec llmhub-db pg_isready
    ```
  </Step>
</Steps>

## Production Hardening

### Security Configuration

<AccordionGroup>
  <Accordion title="Change Default Passwords">
    Update all default credentials in `.env`:

    ```bash
    # Generate strong password
    openssl rand -base64 32

    # Update .env
    DATABASE_URL=postgresql://llm_user:STRONG_PASSWORD_HERE@llmhub-db:5432/llm_hub
    ```

    Restart services:
    ```bash
    docker-compose down
    docker-compose up -d
    ```
  </Accordion>

  <Accordion title="Enable TLS/SSL">
    Use Nginx as reverse proxy:

    ```nginx
    server {
        listen 443 ssl http2;
        server_name llmhub.yourdomain.com;

        ssl_certificate /etc/letsencrypt/live/llmhub.yourdomain.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/llmhub.yourdomain.com/privkey.pem;

        location / {
            proxy_pass http://localhost:4000;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
    ```

    Get free SSL certificate with Let's Encrypt:
    ```bash
    sudo apt install certbot python3-certbot-nginx
    sudo certbot --nginx -d llmhub.yourdomain.com
    ```
  </Accordion>

  <Accordion title="Firewall Configuration">
    ```bash
    # UFW firewall
    sudo ufw default deny incoming
    sudo ufw default allow outgoing
    sudo ufw allow ssh
    sudo ufw allow 80/tcp
    sudo ufw allow 443/tcp
    sudo ufw enable

    # Block direct access to ports 4000 and 5432
    # Only allow access through reverse proxy
    ```
  </Accordion>

  <Accordion title="API Key Hashing">
    <Warning>
      Current implementation stores API keys in plaintext. For production, implement hashing:
    </Warning>

    ```python
    import hashlib

    def hash_api_key(api_key: str) -> str:
        return hashlib.sha256(api_key.encode()).hexdigest()

    # Store hashed key in database
    # Compare hash on authentication
    ```
  </Accordion>
</AccordionGroup>

### Database Optimization

```sql
-- Enable TimescaleDB compression (saves 70-90% storage)
ALTER TABLE llm_generation_log SET (
    timescaledb.compress,
    timescaledb.compress_segmentby = 'provider, client_id',
    timescaledb.compress_orderby = 'created_at DESC'
);

-- Add compression policy (compress data older than 7 days)
SELECT add_compression_policy('llm_generation_log', INTERVAL '7 days');

-- Set retention policy (drop data older than 90 days)
SELECT add_retention_policy('llm_generation_log', INTERVAL '90 days');
```

### Backup Strategy

<Tabs>
  <Tab title="Manual Backup">
    ```bash
    # Backup database
    docker-compose exec llmhub-db pg_dump -U llm_user llm_hub > backup.sql

    # Backup with compression
    docker-compose exec llmhub-db pg_dump -U llm_user llm_hub | gzip > backup.sql.gz

    # Restore from backup
    docker-compose exec -T llmhub-db psql -U llm_user llm_hub < backup.sql
    ```
  </Tab>

  <Tab title="Automated Backups">
    Create backup script `/usr/local/bin/backup-llmhub.sh`:

    ```bash
    #!/bin/bash
    BACKUP_DIR="/var/backups/llmhub"
    DATE=$(date +%Y%m%d_%H%M%S)

    mkdir -p $BACKUP_DIR

    cd /path/to/llmhub

    # Database backup
    docker-compose exec -T llmhub-db pg_dump -U llm_user llm_hub | \
        gzip > "$BACKUP_DIR/llmhub_$DATE.sql.gz"

    # Keep only last 7 days
    find $BACKUP_DIR -name "llmhub_*.sql.gz" -mtime +7 -delete

    echo "Backup completed: llmhub_$DATE.sql.gz"
    ```

    Add to crontab:
    ```bash
    # Daily backup at 2 AM
    0 2 * * * /usr/local/bin/backup-llmhub.sh
    ```
  </Tab>

  <Tab title="Cloud Backups">
    Sync to S3 or similar:

    ```bash
    # Install AWS CLI
    sudo apt install awscli

    # Configure credentials
    aws configure

    # Add to backup script
    aws s3 cp "$BACKUP_DIR/llmhub_$DATE.sql.gz" \
        s3://your-bucket/llmhub-backups/
    ```
  </Tab>
</Tabs>

## Monitoring & Logging

### Application Logs

```bash
# View real-time logs
docker-compose logs -f llmhub

# Search logs
docker-compose logs llmhub | grep ERROR

# Export logs
docker-compose logs --no-color llmhub > llmhub.log
```

### Database Monitoring

```sql
-- Active connections
SELECT count(*) FROM pg_stat_activity WHERE datname = 'llm_hub';

-- Table sizes
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- Slow queries
SELECT query, calls, mean_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;
```

### Health Checks

Set up monitoring with:

<CardGroup cols={3}>
  <Card title="Uptime Monitoring" icon="heartbeat">
    Use UptimeRobot or similar to ping:
    ```
    https://llmhub.yourdomain.com/health
    ```
  </Card>

  <Card title="Prometheus" icon="chart-line">
    Scrape metrics endpoint (coming soon):
    ```
    http://llmhub:4000/metrics
    ```
  </Card>

  <Card title="Log Aggregation" icon="server">
    Ship logs to ELK stack, Papertrail, or CloudWatch
  </Card>
</CardGroup>

## Scaling Strategies

### Vertical Scaling

Increase resources on single server:

```yaml
# docker-compose.yml
services:
  llmhub:
    deploy:
      resources:
        limits:
          cpus: '4'
          memory: 8G
        reservations:
          cpus: '2'
          memory: 4G
```

### Horizontal Scaling

Run multiple LLMHub instances:

```yaml
# docker-compose.prod.yml
services:
  llmhub-1:
    image: llmhub:latest
    environment:
      - DATABASE_URL=${DATABASE_URL}

  llmhub-2:
    image: llmhub:latest
    environment:
      - DATABASE_URL=${DATABASE_URL}

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - llmhub-1
      - llmhub-2
```

### Database Scaling

```yaml
services:
  llmhub-db-primary:
    image: timescale/timescaledb:latest-pg15

  llmhub-db-replica:
    image: timescale/timescaledb:latest-pg15
    environment:
      - POSTGRES_PRIMARY_HOST=llmhub-db-primary
      - POSTGRES_REPLICATION_MODE=replica
```

## Deployment Checklist

<Tabs>
  <Tab title="Pre-Deployment">
    - [ ] System requirements met
    - [ ] Docker and Docker Compose installed
    - [ ] Repository cloned
    - [ ] `.env` configured with production values
    - [ ] Strong passwords set
    - [ ] LLM provider API keys added
    - [ ] Domain name configured (if applicable)
    - [ ] SSL certificate obtained
    - [ ] Firewall rules configured
  </Tab>

  <Tab title="Deployment">
    - [ ] Services built: `docker-compose build`
    - [ ] Services started: `docker-compose up -d`
    - [ ] Health check passed: `curl /health`
    - [ ] Database initialized and accessible
    - [ ] Web console accessible
    - [ ] API endpoints responding
    - [ ] Test API call successful
  </Tab>

  <Tab title="Post-Deployment">
    - [ ] Backup system configured
    - [ ] Monitoring enabled
    - [ ] Logs being collected
    - [ ] SSL certificate auto-renewal configured
    - [ ] Team notified of new deployment
    - [ ] Documentation updated
    - [ ] API clients migrated (if upgrading)
  </Tab>
</Tabs>

## Upgrade Strategy

### Rolling Upgrade

```bash
# 1. Backup database
./backup-llmhub.sh

# 2. Pull latest code
git pull origin main

# 3. Rebuild images
docker-compose build

# 4. Update services one at a time (zero downtime)
docker-compose up -d --no-deps --build llmhub-1
# Wait 30 seconds
docker-compose up -d --no-deps --build llmhub-2

# 5. Verify health
curl https://llmhub.yourdomain.com/health
```

### Database Migrations

```bash
# Apply schema changes
docker-compose exec llmhub-db psql -U llm_user -d llm_hub -f /path/to/migration.sql

# Verify
docker-compose exec llmhub-db psql -U llm_user -d llm_hub -c "\dt"
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Container won't start">
    ```bash
    # Check logs
    docker-compose logs llmhub

    # Check resource usage
    docker stats

    # Recreate container
    docker-compose up -d --force-recreate llmhub
    ```
  </Accordion>

  <Accordion title="Database connection errors">
    ```bash
    # Test connection
    docker-compose exec llmhub-db pg_isready

    # Check connections
    docker-compose exec llmhub-db psql -U llm_user -d llm_hub -c \
      "SELECT count(*) FROM pg_stat_activity;"

    # Restart database
    docker-compose restart llmhub-db
    ```
  </Accordion>

  <Accordion title="High memory usage">
    ```bash
    # Check memory
    docker stats

    # Restart services
    docker-compose restart

    # Increase memory limits
    # Edit docker-compose.yml deploy.resources
    ```
  </Accordion>

  <Accordion title="Slow database queries">
    ```sql
    -- Find slow queries
    SELECT query, mean_exec_time, calls
    FROM pg_stat_statements
    ORDER BY mean_exec_time DESC
    LIMIT 10;

    -- Check missing indexes
    SELECT schemaname, tablename, attname, n_distinct, correlation
    FROM pg_stats
    WHERE schemaname = 'public'
    ORDER BY abs(correlation) ASC;
    ```
  </Accordion>
</AccordionGroup>

## Support & Resources

<CardGroup cols={2}>
  <Card title="GitHub Issues" icon="github" href="https://github.com/yourusername/llmhub/issues">
    Report deployment issues
  </Card>
  <Card title="Community Forum" icon="comments" href="https://community.llmhub.dev">
    Get help from the community
  </Card>
  <Card title="Documentation" icon="book" href="/introduction">
    Browse full documentation
  </Card>
  <Card title="Production Guide" icon="shield" href="/deployment/production">
    Detailed production setup
  </Card>
</CardGroup>
